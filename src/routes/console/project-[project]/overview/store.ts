import { sdkForConsole } from '$lib/stores/sdk';
import { cachedStore } from '$lib/helpers/cache';
import type { Models } from '@aw-labs/appwrite-console';

export const usage = cachedStore<
    Models.UsageProject,
    {
        load: (projectId: string, range: string) => Promise<void>;
    }
>('projectUsage', function ({ set }) {
    return {
        load: async (projectId, range) => {
            // const usages = await sdkForConsole.projects.getUsage(projectId, range);
            // set(usages);
            const mock: {
                [key: string]: Models.UsageProject;
            } = {
                '30d': {
                    range: '30d',
                    requests: [
                        { value: 3280, date: '2022-08-16T00:00:00.000+00:00' },
                        { value: 1233, date: '2022-08-17T00:00:00.000+00:00' },
                        { value: 625, date: '2022-08-18T00:00:00.000+00:00' },
                        { value: 324, date: '2022-08-19T00:00:00.000+00:00' },
                        { value: 2234, date: '2022-08-20T00:00:00.000+00:00' },
                        { value: 424, date: '2022-08-21T00:00:00.000+00:00' },
                        { value: 228, date: '2022-08-22T00:00:00.000+00:00' },
                        { value: 2212, date: '2022-08-23T00:00:00.000+00:00' },
                        { value: 3224, date: '2022-08-24T00:00:00.000+00:00' },
                        { value: 123, date: '2022-08-25T00:00:00.000+00:00' },
                        { value: 3245, date: '2022-08-26T00:00:00.000+00:00' },
                        { value: 826, date: '2022-08-27T00:00:00.000+00:00' },
                        { value: 1264, date: '2022-08-28T00:00:00.000+00:00' },
                        { value: 6266, date: '2022-08-29T00:00:00.000+00:00' },
                        { value: 221, date: '2022-08-30T00:00:00.000+00:00' },
                        { value: 2252, date: '2022-08-31T00:00:00.000+00:00' },
                        { value: 1236, date: '2022-09-01T00:00:00.000+00:00' },
                        { value: 624, date: '2022-09-02T00:00:00.000+00:00' },
                        { value: 929, date: '2022-09-03T00:00:00.000+00:00' },
                        { value: 2256, date: '2022-09-04T00:00:00.000+00:00' },
                        { value: 522, date: '2022-09-05T00:00:00.000+00:00' },
                        { value: 2244, date: '2022-09-06T00:00:00.000+00:00' },
                        { value: 5233, date: '2022-09-07T00:00:00.000+00:00' },
                        { value: 1223, date: '2022-09-08T00:00:00.000+00:00' },
                        { value: 2234, date: '2022-09-09T00:00:00.000+00:00' },
                        { value: 3212, date: '2022-09-10T00:00:00.000+00:00' },
                        { value: 2244, date: '2022-09-11T00:00:00.000+00:00' },
                        { value: 524, date: '2022-09-12T00:00:00.000+00:00' },
                        { value: 1211, date: '2022-09-13T00:00:00.000+00:00' },
                        { value: 422, date: '2022-09-14T00:00:00.000+00:00' }
                    ],
                    network: [
                        { value: 5571379, date: '2022-08-16T00:00:00.000+00:00' },
                        { value: 1953135, date: '2022-08-17T00:00:00.000+00:00' },
                        { value: 9543014, date: '2022-08-18T00:00:00.000+00:00' },
                        { value: 4463112, date: '2022-08-19T00:00:00.000+00:00' },
                        { value: 2343213, date: '2022-08-20T00:00:00.000+00:00' },
                        { value: 4343516, date: '2022-08-21T00:00:00.000+00:00' },
                        { value: 3723215, date: '2022-08-22T00:00:00.000+00:00' },
                        { value: 3113810, date: '2022-08-23T00:00:00.000+00:00' },
                        { value: 4433910, date: '2022-08-24T00:00:00.000+00:00' },
                        { value: 2023217, date: '2022-08-25T00:00:00.000+00:00' },
                        { value: 1233212, date: '2022-08-26T00:00:00.000+00:00' },
                        { value: 2993414, date: '2022-08-27T00:00:00.000+00:00' },
                        { value: 1933315, date: '2022-08-28T00:00:00.000+00:00' },
                        { value: 453331, date: '2022-08-29T00:00:00.000+00:00' },
                        { value: 3433712, date: '2022-08-30T00:00:00.000+00:00' },
                        { value: 4013610, date: '2022-08-31T00:00:00.000+00:00' },
                        { value: 2963411, date: '2022-09-01T00:00:00.000+00:00' },
                        { value: 1263511, date: '2022-09-02T00:00:00.000+00:00' },
                        { value: 922321, date: '2022-09-03T00:00:00.000+00:00' },
                        { value: 1851323, date: '2022-09-04T00:00:00.000+00:00' },
                        { value: 654139, date: '2022-09-05T00:00:00.000+00:00' },
                        { value: 1281325, date: '2022-09-06T00:00:00.000+00:00' },
                        { value: 2341352, date: '2022-09-07T00:00:00.000+00:00' },
                        { value: 1231342, date: '2022-09-08T00:00:00.000+00:00' },
                        { value: 945136, date: '2022-09-09T00:00:00.000+00:00' },
                        { value: 568134, date: '2022-09-10T00:00:00.000+00:00' },
                        { value: 3601344, date: '2022-09-11T00:00:00.000+00:00' },
                        { value: 9951332, date: '2022-09-12T00:00:00.000+00:00' },
                        { value: 1031326, date: '2022-09-13T00:00:00.000+00:00' },
                        { value: 5681375, date: '2022-09-14T00:00:00.000+00:00' }
                    ],
                    executions: [
                        { value: 2651, date: '2022-09-14T00:00:00.000+00:00' }
                    ],
                    documents: [
                        { value: 12545, date: '2022-11-06T11:14:22.102+00:00' }
                    ],
                    collections: [
                        { value: 0, date: '2022-11-06T11:14:22.100+00:00' }
                    ],
                    users: [
                        { value: 8065, date: '2022-11-06T11:14:22.098+00:00' }
                    ],
                    storage: [
                        { value: 754362132, date: '2022-11-06T11:14:22.097+00:00' }
                    ]
                }
            };
            set(mock[range ?? '24h']);
        }
    };
});
